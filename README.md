# sample-windows-forms
Multiple presentations with dependency injection
Original version by https://github.com/MiguelCosta
Can be found here: https://github.com/MiguelCosta/sample-windows-forms/tree/master

## Presentation Layer
|                                                      | Implemented |
|------------------------------------------------------|:-----------:|
| DotNet.IoC.Template.Presentation.WebAPI              |      ✅     |
| DotNet.IoC.Template.Presentation.WebAPI.Client       |      ✅     |
| DotNet.IoC.Template.Presentation.BlazorWebAssembly   |      ❌     |
| DotNet.IoC.Template.Presentation.React               |      ❌     |
| DotNet.IoC.Template.Presentation.WebApplicationMVC   |      ❌     |
| DotNet.IoC.Template.Presentation.BlazorServer        |      ❌     |
| DotNet.IoC.Template.Presentation.WinForms            |      ❌     |


## Solution sctruture

```text
1 - Presentation
    API
        DotNet.IoC.Template.Presentation.WebAPI
        DotNet.IoC.Template.Presentation.WebAPI.Client
    Client
        DotNet.IoC.Template.Presentation.BlazorWebAssembly
        DotNet.IoC.Template.Presentation.React
        DotNet.IoC.Template.Presentation.WebApplicationMVC
    Standalone
        DotNet.IoC.Template.Presentation.BlazorServer
        DotNet.IoC.Template.Presentation.WinForms
2 - Application
    DotNet.IoC.Template.Application.Dto
    DotNet.IoC.Template.Application.Services
3 - Domain
    DotNet.IoC.Template.Domain.Core
    DotNet.IoC.Template.Domain.Models
4 - Data
    DotNet.IoC.Template.Data.EFCore
5 - Infrastructure
    DotNet.IoC.Template.Infrastructure.CrossCutting
```

## DotNet.IoC.Template.Presentation.WebAPI.Client Auto generated
Typescript and csclient auto generated by NSwag
If api schema gets updated, you need to extract the json using NSwagStudio and paste it on `src/DotNet.IoC.Template.Presentation.WebAPI.Client/openapi-spec.json`
NSwag build will generate classes and interfaces which will be injected in the DI container, API url will also get injected in the container.

## Database

Microsoft SQL Server

Scripts to create database schema: `src/DotNet.IoC.Template.Data.EFCore/Scripts`
First setup you need to run _CreateDatabase.sql
Then manually apply the sql scripts generated from the migrations or run Update-Database

## Add migrations
In Package manager console

Create migration
Add-Migration <Migration name>

Apply migration in development
Update-Database

Create sql script from migration
Script-Migration -o ./DotNet.IoC.Template.Data.EFCore/Scripts/<script.sql>
    
## Run

### SQL Server with docker

```
docker run -e ''ACCEPT_EULA=Y'' -e ''SA_PASSWORD=yourStrong(!)Password'' --name mssql -p 1433:1433 -d microsoft/mssql-server-linux
docker container start mssql
// server:   localhost
// user:     sa
// password: yourStrong(!)Password
```

